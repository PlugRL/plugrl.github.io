{"config":{"lang":["en","zh"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"env/custom_env/","title":"\u7f16\u5199\u81ea\u5b9a\u4e49\u73af\u5883","text":"<p>PlugRL \u6240\u9700\u8981\u7684 Env \u7c7b\u7ee7\u627f\u81ea\u57fa\u7c7b <code>plugrl_worker.envs.base_env.BaseEnv</code> \u5176\u7279\u70b9\u662f\u6807\u51c6\u5316\u7684 I/O \u8981\u6c42\uff0cEnv \u7c7b\u4f9d\u9760\u7ee7\u627f\u81ea <code>plugrl_worker.envs.base_env.BaseEnvConfig</code> \u7684 Config \u7c7b\u521d\u59cb\u5316</p> <p>\u5177\u4f53\u800c\u8a00\uff0c\u7528\u6237\u81ea\u5b9a\u4e49\u73af\u5883\u65f6\u53ef\u4ee5\u53c2\u8003\u4e00\u4e0b\u6a21\u677f\uff0c\u5c06\u5df2\u6709\u7684\u73af\u5883\u901a\u8fc7\u7c7b\u4f3c\u6253\u5305\u7684\u65b9\u5f0f\u63a5\u5165\u5230 PlugRL \u4e2d\u3002</p> <p>\u9996\u5148\u662f\u4f60\u9700\u8981\u7f16\u5199\u4e0b\u9762\u4e24\u4e2a\u548c\u73af\u5883\u6709\u5173\u7684\u7c7b\uff0c\u6bd4\u5982\u5728 <code>custom_env.py</code> \u6587\u4ef6\u4e0b\uff1a</p> <pre><code>import dataclasses\nfrom plugrl_worker.envs.base_env import BaseEnv, BaseEnvConfig, Observation, Action\nfrom plugrl_worker.utils.registration import register_env, register_env_config\n\nUID = \"Custom-v1\"\n\n@register_env_config(UID)\n@dataclasses.dataclass\nclass CustomConfig(BaseEnvConfig):\n    ...\n\n@register_env(UID)\nclass CustomEnv(BaseEnv):\n    def __init__(self, config: CustomConfig, worker_id: int | None = None, total_workers: int | None = None):\n        super().__init__(config=config)\n        ...\n\n    def prepare_obs(self, obs: np.ndarray) -&gt; Observation:\n        return Observation(\n            images=...,\n            states=...,\n            text=...,\n        )\n\n    def reset(self, *, seed: int | None = None, options: dict | None = None) -&gt; tuple[Observation | None, dict]:\n        ...\n\n    def step(self, action: Action) -&gt; tuple[Observation | None, float, bool, bool, dict]:\n        ...\n\nif __name__ == \"__main__\":\n    from plugrl_worker.cli import main\n    main()\n</code></pre> <p>\u9996\u5148\u662f\u5f15\u7528</p> <pre><code>from plugrl_worker.envs.base_env import BaseEnv, BaseEnvConfig, Observation, Action\nfrom plugrl_worker.utils.registration import register_env, register_env_config\n</code></pre> <p>\u5176\u4e2d <code>Observation</code> \u548c <code>Action</code> \u662f\u5b9a\u4e49\u7684\u6807\u51c6\u5316 I/O\uff0c\u5177\u4f53\u4e3a\uff1a</p> <pre><code>ImageArray = Annotated[npt.NDArray[np.uint8], (\"b\", \"h\", \"w\", \"c\")]\nStateArray = Annotated[npt.NDArray[DType], (\"b\", \"d\")]\n\n@dataclasses.dataclass\nclass Observation:\n    images: Dict[str, ImageArray]\n    states: Dict[str, StateArray]\n    text: str\n\nAction = Annotated[npt.NDArray[DType], (\"b\", \"da\")]\n</code></pre> <p>\u5176\u4e2d <code>b</code> \u8fd9\u4e00\u9879\u662f\u8003\u8651\u5230\u6253\u5305\u7684\u73af\u5883\u6709\u53ef\u80fd\u672c\u8eab\u652f\u6301\u5e76\u884c\uff0c\u8868\u793a\u5e76\u884c\u73af\u5883\u7684\u4e2a\u6570\uff0c\u4f46\u7531\u4e8e\u76ee\u524d\u8fd8\u4e0d\u652f\u6301\u5e76\u884c\u73af\u5883\u6253\u5305\uff0c\u56e0\u6b64\u8bf7\u6309\u7167 <code>b=1</code> \u8003\u8651\u3002</p> <p>\u4e4b\u540e\u7684 <code>register_env</code>, <code>register_env_config</code> \u662f\u7c7b\u7684\u88c5\u9970\u5668\uff0c\u7528\u4e8e\u6ce8\u518c\u73af\u5883\u53ca\u914d\u7f6e\u6587\u4ef6\uff0c<code>register_env</code> \u540c\u65f6\u652f\u6301\u53c2\u6570 <code>max_episode_steps</code> \u548c <code>best_reward_threshold_for_success</code>\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u6ce8\u518c\u65f6\u540c\u65f6\u8bbe\u7f6e\u4e00\u8f6e\u7684\u6700\u957f\u6b65\u6570\u548c\u6210\u529f\u7684\u5956\u52b1\u6807\u51c6\uff0c\u6bd4\u5982\uff1a</p> <pre><code>register_env(UID, max_episode_steps=100, best_reward_threshold_for_success=1.)\n</code></pre> <p>\u8868\u793a\u6ce8\u518c\u4e00\u4e2a\u540d\u4e3a UID \u7684\u73af\u5883\uff0c\u8fd0\u884c\u6b65\u6570\u4e3a 100\uff0c\u82e5\u5355\u6b21\u5956\u52b1\u8d85\u8fc7 1\uff0c\u5219\u8bb0\u4e3a\u6210\u529f\u3002</p> <p>\u6ce8\u518c\u5668\u53ef\u4ee5\u8ba9\u7528\u6237\u4f7f\u7528 CLI \u770b\u5230\u6ce8\u518c\u597d\u7684\u73af\u5883\uff0c\u8fd0\u884c\u73af\u5883\u7684\u5ba2\u6237\u7aef\u53bb\u63a5\u5165\u5df2\u6709\u7684\u6a21\u578b\u670d\u52a1\u5668\u4e0a\u3002</p> <pre><code>if __name__ == \"__main__\":\n    from plugrl_worker.cli import main\n    main()\n</code></pre> <p>\u5bf9\u4e8e\u914d\u7f6e\u6587\u4ef6\uff0c\u901a\u5e38\u9700\u8981\u5217\u51fa\u8db3\u591f\u7684\u4fe1\u606f\u7528\u4e8e\u521d\u59cb\u5316\u81ea\u5b9a\u4e49\u73af\u5883\uff0c\u4e00\u822c\u5305\u542b\u7c7b\u4f3c <code>env_name</code>, <code>task_id</code> \u7b49\u5b57\u6bb5\u3002</p> <p>\u5bf9\u4e8e\u81ea\u5b9a\u4e49\u73af\u5883\u7c7b\uff0c\u6ce8\u610f\u5230\u521d\u59cb\u5316\u65f6\u9664\u4e86\u914d\u7f6e\u6587\u4ef6\u7684\u4f20\u5165\uff0c\u540c\u65f6\u8fd8\u4f20\u5165\u4e86 <code>worker_id</code> \u548c <code>total_workers</code> \u5b57\u6bb5\uff0c\u8fd9\u4e24\u4e2a\u5b57\u6bb5\u662f\u5ba2\u6237\u7aef\u5728\u5e76\u884c\u521b\u5efa\u65f6\u4f1a\u4f20\u5165\u7684\u53c2\u6570\uff0c\u7528\u6237\u6839\u636e\u8fd9\u4e24\u4e2a\u53c2\u6570\u5b9e\u73b0\u6bcf\u4e2a\u534f\u7a0b\u4e0a\u7684\u5ba2\u6237\u7aef\u8fd0\u884c\u4e0d\u540c\u53c2\u6570\u7684\u73af\u5883\uff0c\u4e00\u4e2a\u4f7f\u7528\u7684\u5178\u578b\u662f\u4ee3\u7801\u5e93\u4e2d <code>plugrl_worker.envs.libero.libero_env</code> \u7684\u5b9e\u73b0\u3002</p>"},{"location":"env/custom_env/#_2","title":"\u4f7f\u7528\u81ea\u5b9a\u4e49\u73af\u5883","text":"<p>\u5982\u679c\u4e00\u5207\u6309\u7167\u9884\u671f\u5b8c\u6210\uff0c\u5728\u8fd0\u884c <code>custom_env.py</code> \u65f6\u4f1a\u770b\u5230</p> <pre><code>\u256d\u2500 Required options \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 The following arguments are required: {dummy-v1,d4rl-v1,atari-v1,classic-v1,robomimic-v1,libero-v1,custom-v1} \u2502\n\u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u2502\n\u2502 For full helptext, run custom_env.py --help                                                                   \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre> <p>\u8fd0\u884c <code>python custom_env.py custom-v1 --help</code> \u65f6\u4f60\u4f1a\u770b\u5230\u6240\u6709\u53ef\u7528\u53c2\u6570\uff0c<code>python custom_env.py custom-v1</code> \u540e\u5982\u679c\u6ca1\u6709\u62a5\u9519\uff0c\u5219\u4e4b\u540e\u4f7f\u7528\u903b\u8f91\u548c\u5176\u4ed6\u73af\u5883\u76f8\u540c\u3002</p>"},{"location":"env/custom_env/#_3","title":"\u4e00\u822c\u8c03\u8bd5\u6d41\u7a0b","text":"<p>\u5728\u8fd0\u884c\u6210\u529f\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>--use-remote-viewer</code> \u548c plugrl_server \u4e2d\u7684 <code>dummy_algorithm</code> \u548c <code>dummy_policy</code> \u6d4b\u8bd5\u968f\u673a\u8fd0\u884c\u7684\u7ed3\u679c\u3002</p>"},{"location":"zh/env/custom_env/","title":"\u7f16\u5199\u81ea\u5b9a\u4e49\u73af\u5883","text":"<p>PlugRL \u6240\u9700\u8981\u7684 Env \u7c7b\u7ee7\u627f\u81ea\u57fa\u7c7b <code>plugrl_worker.envs.base_env.BaseEnv</code> \u5176\u7279\u70b9\u662f\u6807\u51c6\u5316\u7684 I/O \u8981\u6c42\uff0cEnv \u7c7b\u4f9d\u9760\u7ee7\u627f\u81ea <code>plugrl_worker.envs.base_env.BaseEnvConfig</code> \u7684 Config \u7c7b\u521d\u59cb\u5316</p> <p>\u5177\u4f53\u800c\u8a00\uff0c\u7528\u6237\u81ea\u5b9a\u4e49\u73af\u5883\u65f6\u53ef\u4ee5\u53c2\u8003\u4e00\u4e0b\u6a21\u677f\uff0c\u5c06\u5df2\u6709\u7684\u73af\u5883\u901a\u8fc7\u7c7b\u4f3c\u6253\u5305\u7684\u65b9\u5f0f\u63a5\u5165\u5230 PlugRL \u4e2d\u3002</p> <p>\u9996\u5148\u662f\u4f60\u9700\u8981\u7f16\u5199\u4e0b\u9762\u4e24\u4e2a\u548c\u73af\u5883\u6709\u5173\u7684\u7c7b\uff0c\u6bd4\u5982\u5728 <code>custom_env.py</code> \u6587\u4ef6\u4e0b\uff1a</p> <pre><code>import dataclasses\nfrom plugrl_worker.envs.base_env import BaseEnv, BaseEnvConfig, Observation, Action\nfrom plugrl_worker.utils.registration import register_env, register_env_config\n\nUID = \"Custom-v1\"\n\n@register_env_config(UID)\n@dataclasses.dataclass\nclass CustomConfig(BaseEnvConfig):\n    ...\n\n@register_env(UID)\nclass CustomEnv(BaseEnv):\n    def __init__(self, config: CustomConfig, worker_id: int | None = None, total_workers: int | None = None):\n        super().__init__(config=config)\n        ...\n\n    def prepare_obs(self, obs) -&gt; Observation:\n        return Observation(\n            images=...,\n            states=...,\n            text=...,\n        )\n\n    def reset(self, *, seed: int | None = None, options: dict | None = None) -&gt; tuple[Observation | None, dict]:\n        ...\n\n    def step(self, action: Action) -&gt; tuple[Observation | None, float, bool, bool, dict]:\n        ...\n\nif __name__ == \"__main__\":\n    from plugrl_worker.cli import main\n    main()\n</code></pre> <p>\u9996\u5148\u662f\u5f15\u7528</p> <pre><code>from plugrl_worker.envs.base_env import BaseEnv, BaseEnvConfig, Observation, Action\nfrom plugrl_worker.utils.registration import register_env, register_env_config\n</code></pre> <p>\u5176\u4e2d <code>Observation</code> \u548c <code>Action</code> \u662f\u5b9a\u4e49\u7684\u6807\u51c6\u5316 I/O\uff0c\u5177\u4f53\u4e3a\uff1a</p> <pre><code>ImageArray = Annotated[npt.NDArray[np.uint8], (\"b\", \"h\", \"w\", \"c\")]\nStateArray = Annotated[npt.NDArray[DType], (\"b\", \"d\")]\n\n@dataclasses.dataclass\nclass Observation:\n    images: Dict[str, ImageArray]\n    states: Dict[str, StateArray]\n    text: str\n\nAction = Annotated[npt.NDArray[DType], (\"b\", \"da\")]\n</code></pre> <p>\u5176\u4e2d <code>b</code> \u8fd9\u4e00\u9879\u662f\u8003\u8651\u5230\u6253\u5305\u7684\u73af\u5883\u6709\u53ef\u80fd\u672c\u8eab\u652f\u6301\u5e76\u884c\uff0c\u8868\u793a\u5e76\u884c\u73af\u5883\u7684\u4e2a\u6570\uff0c\u4f46\u7531\u4e8e\u76ee\u524d\u8fd8\u4e0d\u652f\u6301\u5e76\u884c\u73af\u5883\u6253\u5305\uff0c\u56e0\u6b64\u8bf7\u6309\u7167 <code>b=1</code> \u8003\u8651\u3002</p> <p>\u4e4b\u540e\u7684 <code>register_env</code>, <code>register_env_config</code> \u662f\u7c7b\u7684\u88c5\u9970\u5668\uff0c\u7528\u4e8e\u6ce8\u518c\u73af\u5883\u53ca\u914d\u7f6e\u6587\u4ef6\uff0c<code>register_env</code> \u540c\u65f6\u652f\u6301\u53c2\u6570 <code>max_episode_steps</code> \u548c <code>best_reward_threshold_for_success</code>\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u6ce8\u518c\u65f6\u540c\u65f6\u8bbe\u7f6e\u4e00\u8f6e\u7684\u6700\u957f\u6b65\u6570\u548c\u6210\u529f\u7684\u5956\u52b1\u6807\u51c6\uff0c\u6bd4\u5982\uff1a</p> <pre><code>register_env(UID, max_episode_steps=100, best_reward_threshold_for_success=1.)\n</code></pre> <p>\u8868\u793a\u6ce8\u518c\u4e00\u4e2a\u540d\u4e3a UID \u7684\u73af\u5883\uff0c\u8fd0\u884c\u6b65\u6570\u4e3a 100\uff0c\u82e5\u5355\u6b21\u5956\u52b1\u8d85\u8fc7 1\uff0c\u5219\u8bb0\u4e3a\u6210\u529f\u3002</p> <p>\u6ce8\u518c\u5668\u53ef\u4ee5\u8ba9\u7528\u6237\u4f7f\u7528 CLI \u770b\u5230\u6ce8\u518c\u597d\u7684\u73af\u5883\uff0c\u8fd0\u884c\u73af\u5883\u7684\u5ba2\u6237\u7aef\u53bb\u63a5\u5165\u5df2\u6709\u7684\u6a21\u578b\u670d\u52a1\u5668\u4e0a\u3002</p> <pre><code>if __name__ == \"__main__\":\n    from plugrl_worker.cli import main\n    main()\n</code></pre> <p>\u5bf9\u4e8e\u914d\u7f6e\u6587\u4ef6\uff0c\u901a\u5e38\u9700\u8981\u5217\u51fa\u8db3\u591f\u7684\u4fe1\u606f\u7528\u4e8e\u521d\u59cb\u5316\u81ea\u5b9a\u4e49\u73af\u5883\uff0c\u4e00\u822c\u5305\u542b\u7c7b\u4f3c <code>env_name</code>, <code>task_id</code> \u7b49\u5b57\u6bb5\u3002</p> <p>\u5bf9\u4e8e\u81ea\u5b9a\u4e49\u73af\u5883\u7c7b\uff0c\u6ce8\u610f\u5230\u521d\u59cb\u5316\u65f6\u9664\u4e86\u914d\u7f6e\u6587\u4ef6\u7684\u4f20\u5165\uff0c\u540c\u65f6\u8fd8\u4f20\u5165\u4e86 <code>worker_id</code> \u548c <code>total_workers</code> \u5b57\u6bb5\uff0c\u8fd9\u4e24\u4e2a\u5b57\u6bb5\u662f\u5ba2\u6237\u7aef\u5728\u5e76\u884c\u521b\u5efa\u65f6\u4f1a\u4f20\u5165\u7684\u53c2\u6570\uff0c\u7528\u6237\u6839\u636e\u8fd9\u4e24\u4e2a\u53c2\u6570\u5b9e\u73b0\u6bcf\u4e2a\u534f\u7a0b\u4e0a\u7684\u5ba2\u6237\u7aef\u8fd0\u884c\u4e0d\u540c\u53c2\u6570\u7684\u73af\u5883\uff0c\u4e00\u4e2a\u4f7f\u7528\u7684\u5178\u578b\u662f\u4ee3\u7801\u5e93\u4e2d <code>plugrl_worker.envs.libero.libero_env</code> \u7684\u5b9e\u73b0\u3002</p>"}]}